<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>aravindavk</title><link href="http://aravindavk.in/" rel="alternate"></link><link href="http://aravindavk.in/feeds/tag-pebble.atom.xml" rel="self"></link><id>http://aravindavk.in/</id><updated>2015-06-02T00:00:00+05:30</updated><entry><title>Developing Pebble Timeline Application - Webmon</title><link href="http://aravindavk.in/blog/developing-pebble-timeline-app-webmon/" rel="alternate"></link><updated>2015-06-02T00:00:00+05:30</updated><author><name>Aravinda VK</name></author><id>tag:aravindavk.in,2015-06-02:blog/developing-pebble-timeline-app-webmon/</id><summary type="html">&lt;p&gt;Pebble firmware 3.0 introduced a new feature called &lt;a class="reference external" href="https://developer.getpebble.com/guides/timeline/"&gt;Timeline&lt;/a&gt;, the advantage of Timeline app is that processing happens in App server instead of in the Mobile / Watch, and can directly send notification to Watch (via the Timeline API website and phone, but no additional app required on the phone).&lt;/p&gt;
&lt;p&gt;I created a Pebble Timeline application to monitor the status of websites called &lt;a class="reference external" href="https://apps.getpebble.com/en_US/application/554627a6ab49e41f8f00004b"&gt;Webmon&lt;/a&gt;. Sometimes friends/users will ping or email to inform that our website is not accessible for some reason. We may lose our business if we don't monitor them regularly.&lt;/p&gt;
&lt;img alt="Webmon App Logo" src="/images/webmon_logo.png" /&gt;
&lt;p&gt;I submitted this app as part of &lt;a class="reference external" href="https://developer.getpebble.com/blog/2015/04/14/the-timeline-challenge-is-live/"&gt;#timelinechallenge&lt;/a&gt;, but the app was not fully working that time and had issues with sending user Pins. I am not sure Pebble team looked at this app or not. :) And now most of the issues got resolved.&lt;/p&gt;
&lt;p&gt;There are other possibilities similar to this app, for example&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;User can register a stock with min and max values, A cron can run every 5-15 mins in the app server. If stock price crosses the user configured limit, then send Timeline notification to user.&lt;/li&gt;
&lt;li&gt;User can configure his/her blood group and location, A daemon in app server can run listening to various APIs like &lt;a class="reference external" href="https://twitter.com/tweet4blood"&gt;&amp;#64;tweet4blood&lt;/a&gt;, if any matching request, send notification to Pebble user with blood request. The user can respond Yes/No(Anytime user can unsubscribe to the service)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This application is written using Python (with Postgresql database) and hosted on &lt;a class="reference external" href="https://www.openshift.com/"&gt;Red Hat OpenShift&lt;/a&gt; cloud platform. (Free account as of now). Number of tracking URLs per user is limited as of now, but based on the feedbacks/usage I will enhance it to track multiple websites.&lt;/p&gt;
&lt;p&gt;When I published the app link on &lt;a class="reference external" href="http://www.reddit.com/r/pebble/comments/34sb31/webmon_website_health_monitor_timeline_app/"&gt;reddit&lt;/a&gt;, &lt;a class="reference external" href="http://www.reddit.com/user/spangborn"&gt;spangborn&lt;/a&gt; was very concerned about the security issues and chances of app server getting blocked by domain owners. He raised some valid concerns, I am planning to address some of those comments soon.&lt;/p&gt;
&lt;p&gt;Timeline APIs are good, &lt;strong&gt;but I feel insecure when it is allowed to push the User pins without using APP_KEY&lt;/strong&gt;. If a user_token is exposed then anybody can send timeline messages and spam that user.&lt;/p&gt;
&lt;p&gt;Pebble watch app &amp;quot;webmon&amp;quot; is simple, just displays a banner page to guide the user to configure the app in app config.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screenshot of Watchapp" src="/images/webmon_watchapp.png" /&gt;
&lt;/div&gt;
&lt;p&gt;In configure window, enter the website URL you want to track and click SAVE. You can anytime disable/enable the website tracking. When configuration is set, it sends registration request to the app server to register a website for tracking using PebbleKit JS.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Configuration page" src="/images/webmon_config.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A cron job runs on app server every one hour, gets the unique list of websites and does an HTTP GET request. If any website's state is different from previous state, then it prepares a Timeline notification and sends it. The app will not spam by sending too many messages, it only notifies the user if the state changed after previous run.&lt;/p&gt;
&lt;img alt="Healthy Notification" src="/images/webmon_healthy.png" /&gt;
&lt;img alt="Faulty Notification" src="/images/webmon_faulty.png" /&gt;
&lt;p&gt;Sending user pin is super easy with Python, I used Python library &lt;a class="reference external" href="https://pypi.python.org/pypi/requests"&gt;requests&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
&lt;span class="n"&gt;pin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c"&gt;# Valid Pin object&lt;/span&gt;
&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;https://timeline-api.getpebble.com/v1/user/pins/&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;X-User-Token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;user_token&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                             &lt;span class="s"&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                    &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="technologies-used"&gt;
&lt;h2&gt;Technologies used:&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Pebblekit JS, Pebble SDK 3&lt;/li&gt;
&lt;li&gt;Python (flask, requests, sqlalchemy)&lt;/li&gt;
&lt;li&gt;Postgresql database&lt;/li&gt;
&lt;li&gt;Cron&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="problems-faced"&gt;
&lt;h2&gt;Problems faced:&lt;/h2&gt;
&lt;p&gt;Without having actual device, testing app is very very difficult to test the Timeline apps. I developed app using installed SDK, but for testing Timeline I copied all code to &lt;a class="reference external" href="https://cloudpebble.net/"&gt;cloudpebble.net&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="show-me-the-code"&gt;
&lt;h2&gt;Show me the Code:&lt;/h2&gt;
&lt;p&gt;I love Open Source and sharing code makes me happy. Code is available in &lt;a class="reference external" href="https://github.com/aravindavk/webmon"&gt;github.com/aravindavk/webmon&lt;/a&gt; with MIT license.&lt;/p&gt;
&lt;p&gt;***&lt;/p&gt;
&lt;p&gt;Comments and Sugesstions welcome.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="pebble"></category></entry><entry><title>Pebble Watchface development experiences</title><link href="http://aravindavk.in/blog/pebble-watchface-development-experiences/" rel="alternate"></link><updated>2015-04-22T00:00:00+05:30</updated><author><name>Aravinda VK</name></author><id>tag:aravindavk.in,2015-04-22:blog/pebble-watchface-development-experiences/</id><summary type="html">&lt;p&gt;I fell in love with the &lt;a class="reference external" href="https://getpebble.com/"&gt;Pebble&lt;/a&gt; Smart watch after reading &lt;a class="reference external" href="http://thejeshgn.com/2015/01/08/liking-pebble-watch/"&gt;Thejesh's blog&lt;/a&gt; about Pebble. I was about to get Pebble Steel, but that time they announced Pebble Time Steel with color epaper display and many more features. Now I am eagerly waiting for Pebble Time Steel :)&lt;/p&gt;
&lt;p&gt;After seeing lots of videos and awesome watch faces, I wanted a watchface in my language. I created a sample app by embedding the Kannada Unicode font and ASCII font to test the Unicode support in Pebble. It has basic support for Unicode, but no support for complex rendering :(&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Pebble Unicode Kannada" src="/images/pebble_unicode_ascii.png" /&gt;
&lt;p class="caption"&gt;First one is Unicode and second one using ASCII font&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;So I started developing digital watchface using Kannada ASCII font and it worked! Developing digital watchface is very simple, Pebble has very good documentation. I created a native app using C language. I published Kannada watchface in Pebble appstore named &lt;a class="reference external" href="https://apps.getpebble.com/applications/55047e53174458ce500000a5"&gt;kannadatime&lt;/a&gt;. I tested only on emulator. But I was curious to see how it looks in real Pebble watch(I don't have a watch yet)&lt;/p&gt;
&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p&gt;I don&amp;#39;t own Pebble yet, but published my first &lt;a href="https://twitter.com/Pebble"&gt;@Pebble&lt;/a&gt; app. Displays Time in Kannada language &lt;a href="https://t.co/xhnPhHonpZ"&gt;https://t.co/xhnPhHonpZ&lt;/a&gt; C&amp;amp;S Welcome. &lt;a href="https://twitter.com/thej"&gt;@thej&lt;/a&gt;&lt;/p&gt;&amp;mdash; Aravinda (@aravindavk) &lt;a href="https://twitter.com/aravindavk/status/576816685786624000"&gt;March 14, 2015&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;p&gt;Thejesh installed app on his Pebble and shared screenshot, looking awesome in real Pebble. Fonts looking smaller than I see on emulator. Thanks Thejesh :)&lt;/p&gt;
&lt;blockquote class="twitter-tweet" data-conversation="none" lang="en"&gt;&lt;p&gt;. &lt;a href="https://twitter.com/aravindavk"&gt;@aravindavk&lt;/a&gt; Good news the hack works. Kannada is tendered quite well. Blog about it. &lt;a href="https://twitter.com/Pebble"&gt;@Pebble&lt;/a&gt; &lt;a href="http://t.co/giPmQzzo5e"&gt;pic.twitter.com/giPmQzzo5e&lt;/a&gt;&lt;/p&gt;&amp;mdash; Thejesh GN (@thej) &lt;a href="https://twitter.com/thej/status/576902191077724161"&gt;March 15, 2015&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;p&gt;If anybody interested in this &lt;a class="reference external" href="https://apps.getpebble.com/applications/55047e53174458ce500000a5"&gt;watchface&lt;/a&gt;, do try and let me know if useful. I have some plans to improve this watchface by adding animation on minute change and adding color for Pebble Time.&lt;/p&gt;
&lt;p&gt;If you don't know about Pebble, visit &lt;a class="reference external" href="https://getpebble.com/"&gt;https://getpebble.com/&lt;/a&gt; to know more.&lt;/p&gt;
</summary><category term="pebble"></category></entry></feed>